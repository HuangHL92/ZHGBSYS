
function LeafCheckBoxTreeItem(sText,sAction,eParent,sIcon,sOpenIcon,nValue,sCheckBoxName){this.base=WebFXTreeItem;this.base(sText,sAction,eParent,sIcon,sOpenIcon);this._checkBox=new Bs_Checkbox();this._checkBox.checkboxName=sCheckBoxName;this._checkBox.attachOnClick("webFXTreeHandler.all[\'"+this.id+"\'].setCheckedEvent()");if(nValue!=undefined)this._checkBox.value=nValue;this._sCheckBox=this._checkBox.render(this._checkBox._tagId);}LeafCheckBoxTreeItem.prototype=new WebFXTreeItem;LeafCheckBoxTreeItem.prototype.toString=function(nItem,nItemCount){var foo=this.parentNode;var indent='';if(nItem+1==nItemCount){this.parentNode._last=true;}var i=0;while(foo.parentNode){foo=foo.parentNode;indent="<img id=\""+this.id+"-indent-"+i+"\" src=\""+((foo._last)?webFXTreeConfig.blankIcon:webFXTreeConfig.iIcon)+"\">"+indent;i++;}this._level=i;if(this.childNodes.length){this.folder=1;}else{this.open=false;}if((this.folder)||(webFXTreeHandler.behavior!='classic')){if(!this.icon){this.icon=webFXTreeConfig.folderIcon;}if(!this.openIcon){this.openIcon=webFXTreeConfig.openFolderIcon;}}else if(!this.icon){this.icon=webFXTreeConfig.fileIcon;}var label=this.text.replace(/</g,'&lt;').replace(/>/g,'&gt;');var str="<div id=\""+this.id+"\" ondblclick=\"webFXTreeHandler.toggle(this);\" class=\"webfx-tree-item\" onkeydown=\"return webFXTreeHandler.keydown(this, event)\">";str+=indent;str+="<img id=\""+this.id+"-plus\" src=\""+((this.folder)?((this.open)?((this.parentNode._last)?webFXTreeConfig.lMinusIcon:webFXTreeConfig.tMinusIcon):((this.parentNode._last)?webFXTreeConfig.lPlusIcon:webFXTreeConfig.tPlusIcon)):((this.parentNode._last)?webFXTreeConfig.lIcon:webFXTreeConfig.tIcon))+"\" onclick=\"webFXTreeHandler.toggle(this);\">";str+=this._sCheckBox;str+="<img id=\""+this.id+"-icon\" class=\"webfx-tree-icon\" src=\""+((webFXTreeHandler.behavior=='classic'&&this.open)?this.openIcon:this.icon)+"\" onclick=\"webFXTreeHandler.select(this);\"><a href=\""+this.action+"\" id=\""+this.id+"-anchor\" onfocus=\"webFXTreeHandler.focus(this);\" onblur=\"webFXTreeHandler.blur(this);\">"+label+"</a></div>";str+="<div id=\""+this.id+"-cont\" class=\"webfx-tree-container\" style=\"display: "+((this.open)?'block':'none')+";\">";for(var i=0;i<this.childNodes.length;i++){str+=this.childNodes[i].toString(i,this.childNodes.length);};str+="</div>";this.plusIcon=((this.parentNode._last)?webFXTreeConfig.lPlusIcon:webFXTreeConfig.tPlusIcon);this.minusIcon=((this.parentNode._last)?webFXTreeConfig.lMinusIcon:webFXTreeConfig.tMinusIcon);return str;};LeafCheckBoxTreeItem.prototype.setCheckedEvent=function(){this.setParentNodeChecked();this.setChildNodesChecked();};LeafCheckBoxTreeItem.prototype.setParentNodeChecked=function(){var foo=this.parentNode;if(foo&&foo.rendered==undefined){var numYes=0;var numNo=0;var isPartly=false;for(var i=foo.childNodes.length-1;i>=0;i--){var fooChildCheckBoxValue=foo.childNodes[i]._checkBox.value;if(fooChildCheckBoxValue==1){isPartly=true;foo._checkBox.setTo(1,true);break;}else if(fooChildCheckBoxValue==2){numYes++;}else{numNo++;}if((numYes>0)&&(numNo>0)){break;}}if(!isPartly){if((numYes>0)&&(numNo>0)){foo._checkBox.setTo(1,true);}else if(numYes>0){foo._checkBox.setTo(2,true);}else{foo._checkBox.setTo(0,true);}}foo.setParentNodeChecked();}};LeafCheckBoxTreeItem.prototype.setChildNodesChecked=function(){for(var i=this.childNodes.length-1;i>=0;i--){var childCheckBoxValue=this._checkBox.value;var newValue=(childCheckBoxValue)?2:0;this.childNodes[i]._checkBox.setTo(newValue,true);this.childNodes[i].setChildNodesChecked();}};LeafCheckBoxTreeItem.prototype.getChecked=function(){var divEl=document.getElementById(this.id);var inputEl=divEl.getElementsByTagName("INPUT")[0];return this._checked=inputEl.checked;};